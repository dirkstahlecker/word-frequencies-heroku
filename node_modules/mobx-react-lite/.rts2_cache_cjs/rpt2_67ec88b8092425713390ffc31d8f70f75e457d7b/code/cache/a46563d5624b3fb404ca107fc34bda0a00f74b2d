{"code":"import { observable, runInAction, transaction } from \"mobx\";\r\nimport React from \"react\";\r\nimport { useAsObservableSourceInternal } from \"./useAsObservableSource\";\r\nimport { isPlainObject } from \"./utils\";\r\nexport function useLocalStore(initializer, current) {\r\n    const source = useAsObservableSourceInternal(current, true);\r\n    return React.useState(() => {\r\n        const local = observable(initializer(source));\r\n        if (isPlainObject(local)) {\r\n            runInAction(() => {\r\n                Object.keys(local).forEach(key => {\r\n                    const value = local[key];\r\n                    if (typeof value === \"function\") {\r\n                        // @ts-ignore No idea why ts2536 is popping out here\r\n                        local[key] = wrapInTransaction(value, local);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return local;\r\n    })[0];\r\n}\r\n// tslint:disable-next-line: ban-types\r\nfunction wrapInTransaction(fn, context) {\r\n    return (...args) => {\r\n        return transaction(() => fn.apply(context, args));\r\n    };\r\n}\r\n//# sourceMappingURL=useLocalStore.js.map","references":["D:/workspace/github/mobx-react-lite/node_modules/mobx/lib/mobx.d.ts","D:/workspace/github/mobx-react-lite/node_modules/@types/react/index.d.ts","D:/workspace/github/mobx-react-lite/src/useAsObservableSource.ts","D:/workspace/github/mobx-react-lite/src/utils.ts"],"map":"{\"version\":3,\"file\":\"useLocalStore.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/useLocalStore.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,MAAM,MAAM,CAAA;AAC3D,OAAO,KAAK,MAAM,OAAO,CAAA;AAEzB,OAAO,EAAE,6BAA6B,EAAE,MAAM,yBAAyB,CAAA;AACvE,OAAO,EAAE,aAAa,EAAE,MAAM,SAAS,CAAA;AAEvC,MAAM,UAAU,aAAa,CACzB,WAAwC,EACxC,OAAiB;IAEjB,MAAM,MAAM,GAAG,6BAA6B,CAAsB,OAAO,EAAE,IAAI,CAAC,CAAA;IAEhF,OAAO,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAE;QACvB,MAAM,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,MAAiB,CAAC,CAAC,CAAA;QACxD,IAAI,aAAa,CAAC,KAAK,CAAC,EAAE;YACtB,WAAW,CAAC,GAAG,EAAE;gBACb,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;oBAC7B,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;oBACxB,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;wBAC7B,oDAAoD;wBACpD,KAAK,CAAC,GAAG,CAAC,GAAG,iBAAiB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;qBAC/C;gBACL,CAAC,CAAC,CAAA;YACN,CAAC,CAAC,CAAA;SACL;QACD,OAAO,KAAK,CAAA;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AACT,CAAC;AAED,sCAAsC;AACtC,SAAS,iBAAiB,CAAC,EAAY,EAAE,OAAe;IACpD,OAAO,CAAC,GAAG,IAAe,EAAE,EAAE;QAC1B,OAAO,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAA;IACrD,CAAC,CAAA;AACL,CAAC\"}","dts":{"name":"D:/workspace/github/mobx-react-lite/useLocalStore.d.ts","writeByteOrderMark":false,"text":"export declare function useLocalStore<TStore extends Record<string, any>, TSource extends object = any>(initializer: (source: TSource) => TStore, current?: TSource): TStore;\r\n"}}
