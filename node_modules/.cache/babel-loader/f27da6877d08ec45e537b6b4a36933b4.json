{"ast":null,"code":"import _possibleConstructorReturn from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/inherits\";import _initializerDefineProperty from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";import _classCallCheck from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/createClass\";import _applyDecoratedDescriptor from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";import _initializerWarningHelper from\"/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";var _class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_temp,_class3,_class4,_descriptor7,_temp2;import*as React from\"react\";import{NameReference}from\"./NameReference\";import{observable,action,runInAction,computed}from\"mobx\";import{observer}from\"mobx-react\";import{MarkupUtils}from\"./MarkupUtils\";import{JournalReader,JournalReaderMachine}from\"./JournalReader\";// import * as Modal from \"react-modal\";\nimport Modal from\"react-modal\";import $ from\"jquery\";import{NamePickerModal,NamePickerModalMachine}from\"./NamePickerModal\";import{AddMarkupMachine}from\"./AddMarkupToExistingEntry\";// import {Editor, EditorState} from 'draft-js';\nimport axios from'axios';Modal.setAppElement(document.getElementById('root'));export var AppMachine=(_class=(_temp=/*#__PURE__*/function(){function AppMachine(){_classCallCheck(this,AppMachine);_initializerDefineProperty(this,\"journalText\",_descriptor,this);_initializerDefineProperty(this,\"currentName\",_descriptor2,this);_initializerDefineProperty(this,\"finalText\",_descriptor3,this);_initializerDefineProperty(this,\"newJournalEntry\",_descriptor4,this);_initializerDefineProperty(this,\"showDisplayJournalPlace\",_descriptor5,this);this.modalObj=null;this.addMarkupMachine=new AddMarkupMachine();this.journalReaderMachine=new JournalReaderMachine();this.namePickerModalMachine=new NamePickerModalMachine();_initializerDefineProperty(this,\"updateJournalText\",_descriptor6,this);}_createClass(AppMachine,[{key:\"setCurrentName\",value:function setCurrentName(value){this.currentName=value;}},{key:\"createFinalText\",value:function createFinalText(e){var dateStr=e.currentTarget.value;this.finalText=dateStr+\": \"+this.journalText;}},{key:\"handleModalCloseRequest\",value:function handleModalCloseRequest(commit){if(!commit)//close without adding markup\n{this.currentName=null;return;}if(this.currentName==null){throw Error(\"name shouldn't be null\");}//take the last name given by the user and insert the proper markup into the box itself\nvar realFirstName=this.namePickerModalMachine.realFirstName;var markup=MarkupUtils.makeMarkup(realFirstName!=null?realFirstName:this.currentName,this.namePickerModalMachine.lastName,this.currentName);var textLen=this.journalText.length;var previousJournalText=this.journalText;//add the markup in place of the name\nthis.journalText=previousJournalText.substring(0,textLen-this.currentName.length-1)+markup+previousJournalText.substring(textLen-1,textLen);//clean up\nthis.currentName=null;//close the modal\nthis.namePickerModalMachine.lastName=\"\";//reset\nthis.namePickerModalMachine.realFirstName=null;}// private legalLetters: string[] = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n// \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"-\", \"'\", \"\\\"\"];\n},{key:\"showModal\",get:function get(){return this.currentName!=null;}}]);return AppMachine;}(),_temp),(_descriptor=_applyDecoratedDescriptor(_class.prototype,\"journalText\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return\"\";}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,\"currentName\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return null;}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,\"finalText\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return\"\";}}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,\"newJournalEntry\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return true;}}),_descriptor5=_applyDecoratedDescriptor(_class.prototype,\"showDisplayJournalPlace\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return false;}}),_applyDecoratedDescriptor(_class.prototype,\"setCurrentName\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"setCurrentName\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"showModal\",[computed],Object.getOwnPropertyDescriptor(_class.prototype,\"showModal\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"createFinalText\",[action],Object.getOwnPropertyDescriptor(_class.prototype,\"createFinalText\"),_class.prototype),_descriptor6=_applyDecoratedDescriptor(_class.prototype,\"updateJournalText\",[action],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){var _this=this;return function(e){_this.journalText=e.currentTarget.value;var text=_this.journalText;var lastWord;var lastCharacter=text.substring(text.length-1,text.length);if(lastCharacter===\" \"){text=text.substring(0,text.length-1);//remove trailing space\nlastWord=text.substring(Math.max(text.lastIndexOf(\" \"),text.lastIndexOf(\"\\n\")),text.length);lastWord=lastWord+\" \";//add space back in for the rest of the logic to work properly\n}else{lastWord=text.substring(Math.max(text.lastIndexOf(\" \"),text.lastIndexOf(\"\\n\")),text.length);}//names must be preceeded by a space or newline and followed by a word split character\nif(AddMarkupMachine.wordSplitCharacters.indexOf(lastWord.substring(lastWord.length-1,lastWord.length))>-1)//last character is a word split character\n{lastWord=NameReference.cleanWord(lastWord.substring(0,lastWord.length-1));//remove the final character to get just the name\nif(NameReference.isName(lastWord)){_this.currentName=lastWord;}}};}})),_class);export var App=observer(_class3=(_class4=(_temp2=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _getPrototypeOf2;var _this2;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this2=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_initializerDefineProperty(_this2,\"currentMarkupHack\",_descriptor7,_assertThisInitialized(_this2));_this2.handleEasyMarkupGeneratorSubmit=function(){var firstName=$(\"#firstName\").val();var lastName=$(\"#lastName\").val();var displayName=$(\"#displayName\").val();_this2.currentMarkupHack=MarkupUtils.makeMarkup(firstName,lastName,displayName);$(\"#placeToSelectText\").val(_this2.currentMarkupHack);var copyText=document.getElementById(\"displayCopyArea\");_this2.selectElementContents(copyText);document.execCommand(\"copy\");$(\"#firstName\").val(\"\").focus();$(\"#lastName\").val(\"\");$(\"#displayName\").val(\"\");};return _this2;}_createClass(App,[{key:\"selectElementContents\",value:function selectElementContents(el){var range=document.createRange();range.selectNodeContents(el);var sel=window.getSelection();if(sel==null){return;}sel.removeAllRanges();sel.addRange(range);}},{key:\"makeRequest\",value:function makeRequest(){axios.request({url:'localhost:8765'// transformResponse: (r: PersonSchema) => r.data\n}).then(function(response){// `response` is of type `AxiosResponse<ServerData>`\n// const { data } = response\n// `data` is of type ServerData, correctly inferred\nconsole.log(response.firstName);});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"span\",{style:{width:\"100%\",height:\"100%\",display:\"inline-block\",verticalAlign:\"top\"},tabIndex:0,id:\"mainApp\"},React.createElement(NamePickerModal,{machine:this.props.machine.namePickerModalMachine,onRequestClose:function onRequestClose(commit){return _this3.props.machine.handleModalCloseRequest(commit);},isOpen:this.props.machine.showModal,currentName:this.props.machine.currentName==null?\"\":this.props.machine.currentName,ref:function ref(x){return _this3.props.machine.modalObj=x;}}),React.createElement(\"button\",{onClick:function onClick(){return _this3.makeRequest();}},\"TEST\"),React.createElement(\"button\",{onClick:function onClick(){return runInAction(function(){return _this3.props.machine.newJournalEntry=!_this3.props.machine.newJournalEntry;});}},this.props.machine.newJournalEntry?\"Add markup to existing entry\":\"Create new journal entry\"),React.createElement(\"button\",{onClick:function onClick(){return runInAction(function(){return _this3.props.machine.showDisplayJournalPlace=!_this3.props.machine.showDisplayJournalPlace;});}},\"Read journal\"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{style:{width:\"50%\",display:\"inline-block\",verticalAlign:\"top\"}},this.props.machine.newJournalEntry&&!this.props.machine.showDisplayJournalPlace&&React.createElement(React.Fragment,null,React.createElement(\"label\",{htmlFor:\"dateEntry\"},\"Date: \"),React.createElement(\"br\",null),React.createElement(\"input\",{type:\"text\",id:\"dateEntry\"}),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"journalEntry\"},\"Entry: \"),React.createElement(\"br\",null),React.createElement(\"textarea\",{id:\"journalEntry\",value:this.props.machine.journalText,onChange:function onChange(e){return _this3.props.machine.updateJournalText(e);},style:{width:\"90%\",height:\"200px\"}}),React.createElement(\"br\",null),React.createElement(\"button\",{onClick:function onClick(e){return _this3.props.machine.createFinalText(e);}},\"Submit\")),!this.props.machine.newJournalEntry&&//           {/*<AddMarkupToExistingEntry machine={this.props.machine.addMarkupMachine} />*/}\n!this.props.machine.showDisplayJournalPlace&&React.createElement(\"div\",{onKeyDown:function onKeyDown(e){if(e.key===\"Enter\"){e.preventDefault();_this3.handleEasyMarkupGeneratorSubmit();}}},\"First Name: \",React.createElement(\"input\",{type:\"text\",id:\"firstName\",autoFocus:true}),React.createElement(\"br\",null),\"Last Name: \",React.createElement(\"input\",{type:\"text\",id:\"lastName\"}),React.createElement(\"br\",null),\"Display Name: \",React.createElement(\"input\",{type:\"text\",id:\"displayName\"}),React.createElement(\"br\",null),React.createElement(\"button\",{onClick:this.handleEasyMarkupGeneratorSubmit},\"Submit\"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{id:\"displayCopyArea\"},React.createElement(\"input\",{id:\"placeToSelectText\"}))),this.props.machine.showDisplayJournalPlace&&React.createElement(JournalReader,{machine:this.props.machine.journalReaderMachine})),React.createElement(\"div\",{style:{width:\"50%\",display:\"inline-block\",verticalAlign:\"top\",whiteSpace:\"pre-wrap\"}},this.props.machine.finalText));}}]);return App;}(React.Component),_temp2),(_descriptor7=_applyDecoratedDescriptor(_class4.prototype,\"currentMarkupHack\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return\"\";}})),_class4))||_class3;// @observer\n// class MyEditor extends React.Component<EditorProps>\n// {\n//   @observable editorState = EditorState.createEmpty();\n//   constructor(props: EditorProps)\n//   {\n//     super(props);\n//     // this.state = {editorState: EditorState.createEmpty()};\n//     // this.onChange = (editorState) => this.setState({editorState});\n//   }\n//   @action\n//   private onChange = (editorState: any): void => {\n//     this.editorState = editorState;\n//   }\n//   public render() \n//   {\n//     return (\n//         <Editor editorState={this.editorState} onChange={this.onChange} />\n//     );\n//   }\n// }\nexport default App;/*\nBUGS\n-have to write in chonological order - can't jump around with names, since they only add to end\n-need to have a story for name picker cancel\n-case sensitive (name popup only when name is capitalized) - or maybe only for particular names that are also common words (will)\n\n\nFEATURES\n-\n*/","map":{"version":3,"sources":["/Users/dirkstahlecker/programming/word-frequencies-heroku/src/App.tsx"],"names":["React","NameReference","observable","action","runInAction","computed","observer","MarkupUtils","JournalReader","JournalReaderMachine","Modal","$","NamePickerModal","NamePickerModalMachine","AddMarkupMachine","axios","setAppElement","document","getElementById","AppMachine","modalObj","addMarkupMachine","journalReaderMachine","namePickerModalMachine","value","currentName","e","dateStr","currentTarget","finalText","journalText","commit","Error","realFirstName","markup","makeMarkup","lastName","textLen","length","previousJournalText","substring","text","lastWord","lastCharacter","Math","max","lastIndexOf","wordSplitCharacters","indexOf","cleanWord","isName","App","handleEasyMarkupGeneratorSubmit","firstName","val","displayName","currentMarkupHack","copyText","selectElementContents","execCommand","focus","el","range","createRange","selectNodeContents","sel","window","getSelection","removeAllRanges","addRange","request","url","then","response","console","log","width","height","display","verticalAlign","props","machine","handleModalCloseRequest","showModal","x","makeRequest","newJournalEntry","showDisplayJournalPlace","updateJournalText","createFinalText","key","preventDefault","whiteSpace","Component"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {NameReference} from \"./NameReference\";\nimport {observable, action, runInAction, computed} from \"mobx\";\nimport {observer} from \"mobx-react\";\nimport {MarkupUtils} from \"./MarkupUtils\";\nimport {JournalReader, JournalReaderMachine} from \"./JournalReader\";\n// import * as Modal from \"react-modal\";\nimport Modal from \"react-modal\";\nimport $ from \"jquery\";\nimport {NamePickerModal, NamePickerModalMachine} from \"./NamePickerModal\";\nimport {AddMarkupMachine} from \"./AddMarkupToExistingEntry\";\n// import {Editor, EditorState} from 'draft-js';\nimport axios from 'axios';\n\nModal.setAppElement(document.getElementById('root')!!);\n\ninterface PersonSchema\n{\n  firstName: String,\n  lastName: String,\n  displayName: String\n}\n\nexport class AppMachine\n{\n  @observable\n  public journalText: string = \"\";\n\n  @observable\n  public currentName: string | null = null;\n\n  @observable\n  public finalText: string = \"\";\n\n  @observable\n  public newJournalEntry: boolean = true;\n\n  @observable\n  public showDisplayJournalPlace: boolean = false;\n\n  public modalObj: NamePickerModal | null = null;\n\n  public addMarkupMachine: AddMarkupMachine = new AddMarkupMachine();\n\n  public journalReaderMachine: JournalReaderMachine = new JournalReaderMachine();\n\n  @action\n  public setCurrentName(value: string | null): void\n  {\n    this.currentName = value;\n  }\n\n  @computed\n  public get showModal(): boolean\n  {\n    return this.currentName != null;\n  }\n\n  public namePickerModalMachine: NamePickerModalMachine = new NamePickerModalMachine();\n\n  @action\n  public createFinalText(e: React.MouseEvent<HTMLButtonElement>): void\n  {\n    const dateStr: string = e.currentTarget.value;\n    this.finalText = dateStr + \": \" + this.journalText;\n  }\n\n  @action\n  public updateJournalText = (e: React.ChangeEvent<HTMLTextAreaElement>): void => {\n    this.journalText = e.currentTarget.value;\n\n    let text: string = this.journalText;\n    let lastWord: string;\n    let lastCharacter: string = text.substring(text.length - 1, text.length);\n    if (lastCharacter === \" \")\n    {\n      text = text.substring(0, text.length - 1); //remove trailing space\n      lastWord = text.substring(Math.max(text.lastIndexOf(\" \"), text.lastIndexOf(\"\\n\")), text.length);\n      lastWord = lastWord + \" \"; //add space back in for the rest of the logic to work properly\n    }\n    else\n    {\n      lastWord = text.substring(Math.max(text.lastIndexOf(\" \"), text.lastIndexOf(\"\\n\")), text.length);\n    }\n    \n    //names must be preceeded by a space or newline and followed by a word split character\n    if (AddMarkupMachine.wordSplitCharacters.indexOf(lastWord.substring(lastWord.length - 1, lastWord.length)) > -1) //last character is a word split character\n    {\n      lastWord = NameReference.cleanWord(lastWord.substring(0, lastWord.length - 1)); //remove the final character to get just the name\n      if (NameReference.isName(lastWord))\n      {\n        this.currentName = lastWord;\n      }\n    }\n  };\n\n  public handleModalCloseRequest(commit: boolean): void\n  {\n    if (!commit) //close without adding markup\n    {\n      this.currentName = null;\n      return;\n    }\n    if (this.currentName == null)\n    {\n      throw Error(\"name shouldn't be null\");\n    }\n    //take the last name given by the user and insert the proper markup into the box itself\n    let realFirstName: string | null = this.namePickerModalMachine.realFirstName;\n    const markup: string = MarkupUtils.makeMarkup(realFirstName != null ? realFirstName : this.currentName, this.namePickerModalMachine.lastName, this.currentName);\n    const textLen: number = this.journalText.length;\n    const previousJournalText: string = this.journalText;\n    //add the markup in place of the name\n    this.journalText = previousJournalText.substring(0, textLen - this.currentName.length - 1) + markup +  previousJournalText.substring(textLen - 1, textLen);\n\n    //clean up\n    this.currentName = null; //close the modal\n    this.namePickerModalMachine.lastName = \"\"; //reset\n    this.namePickerModalMachine.realFirstName = null;\n  }\n\n  // private legalLetters: string[] = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n  // \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"-\", \"'\", \"\\\"\"];\n}\n\nexport interface AppProps\n{\n  machine: AppMachine;\n}\n\n@observer\nexport class App extends React.Component<AppProps>\n{\n  @observable currentMarkupHack: string = \"\";\n\n  public handleEasyMarkupGeneratorSubmit = (): void => {\n    let firstName: string = $(\"#firstName\").val() as string;\n    let lastName: string = $(\"#lastName\").val() as string;\n    let displayName: string = $(\"#displayName\").val() as string;\n\n    this.currentMarkupHack = MarkupUtils.makeMarkup(firstName, lastName, displayName);\n    $(\"#placeToSelectText\").val(this.currentMarkupHack);\n\n    var copyText = document.getElementById(\"displayCopyArea\") as HTMLElement;\n    this.selectElementContents(copyText);\n    document.execCommand(\"copy\");\n\n    $(\"#firstName\").val(\"\").focus();\n    $(\"#lastName\").val(\"\");\n    $(\"#displayName\").val(\"\");\n\n\n  };\n\n  private selectElementContents(el: any) {\n    var range = document.createRange();\n    range.selectNodeContents(el);\n    var sel = window.getSelection();\n    if (sel == null)\n    {\n      return;\n    }\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n\n  private makeRequest()\n  {\n    axios.request<PersonSchema>({\n      url: 'localhost:8765'\n      // transformResponse: (r: PersonSchema) => r.data\n    }).then((response: any) => {\n      // `response` is of type `AxiosResponse<ServerData>`\n      // const { data } = response\n      // `data` is of type ServerData, correctly inferred\n      console.log(response.firstName);\n    })\n  }\n\n  public render()\n  {\n    return (\n      <span style={{width: \"100%\", height: \"100%\", display: \"inline-block\", verticalAlign: \"top\"}} \n            tabIndex={0}\n            id=\"mainApp\"\n      >\n        <NamePickerModal \n          machine={this.props.machine.namePickerModalMachine}\n          onRequestClose={(commit: boolean) => this.props.machine.handleModalCloseRequest(commit)}\n          isOpen={this.props.machine.showModal}\n          currentName={this.props.machine.currentName == null ? \"\" : this.props.machine.currentName}\n          ref={(x) => this.props.machine.modalObj = x}\n        />\n        <button onClick={() => this.makeRequest()}>TEST</button>\n        <button onClick={() => runInAction(() => this.props.machine.newJournalEntry = !this.props.machine.newJournalEntry)}>\n          {this.props.machine.newJournalEntry ? \"Add markup to existing entry\" : \"Create new journal entry\"}\n        </button>\n        <button onClick={() => runInAction(() => this.props.machine.showDisplayJournalPlace = !this.props.machine.showDisplayJournalPlace)}>\n          Read journal\n        </button>\n        <br />\n        <br />\n        <div style={{width: \"50%\", display: \"inline-block\", verticalAlign: \"top\"}}>\n          {\n            this.props.machine.newJournalEntry && \n            !this.props.machine.showDisplayJournalPlace &&\n            <>\n              <label htmlFor=\"dateEntry\">Date: </label>\n              <br />\n              <input type=\"text\" id=\"dateEntry\" />\n              <br />\n              <br />\n              <label htmlFor=\"journalEntry\">Entry: </label>\n              <br />\n              <textarea id=\"journalEntry\" \n                        value={this.props.machine.journalText} \n                        onChange={(e) => this.props.machine.updateJournalText(e)}\n                        style={{width: \"90%\", height: \"200px\"}}\n              />\n              {/*<MyEditor />*/}\n              <br />\n              <button onClick={(e) => this.props.machine.createFinalText(e)}>Submit</button>\n            </>\n          }\n          {\n            !this.props.machine.newJournalEntry && //           {/*<AddMarkupToExistingEntry machine={this.props.machine.addMarkupMachine} />*/}\n            !this.props.machine.showDisplayJournalPlace &&\n            <div onKeyDown={(e: any) => {\n              if (e.key === \"Enter\")\n              {\n                e.preventDefault();\n                this.handleEasyMarkupGeneratorSubmit();\n              }\n            }}>\n              First Name: <input type=\"text\" id=\"firstName\" autoFocus={true}/>\n              <br />\n              Last Name: <input type=\"text\" id=\"lastName\" />\n              <br />\n              Display Name: <input type=\"text\" id=\"displayName\" />\n              <br />\n              <button onClick={this.handleEasyMarkupGeneratorSubmit}>Submit</button>\n              <br />\n              <br />\n              <div id=\"displayCopyArea\">\n                <input id=\"placeToSelectText\" />\n              </div>\n            </div>\n          }\n          {\n            this.props.machine.showDisplayJournalPlace &&\n            <JournalReader machine={this.props.machine.journalReaderMachine}/>\n          }\n\n        </div>\n        <div style={{width: \"50%\", display: \"inline-block\", verticalAlign: \"top\", whiteSpace: \"pre-wrap\"}}>\n          {this.props.machine.finalText}\n        </div>\n      </span>\n    );\n  }\n}\n\ninterface EditorProps\n{\n\n}\n\n// @observer\n// class MyEditor extends React.Component<EditorProps>\n// {\n//   @observable editorState = EditorState.createEmpty();\n\n//   constructor(props: EditorProps)\n//   {\n//     super(props);\n//     // this.state = {editorState: EditorState.createEmpty()};\n//     // this.onChange = (editorState) => this.setState({editorState});\n//   }\n\n//   @action\n//   private onChange = (editorState: any): void => {\n//     this.editorState = editorState;\n//   }\n\n//   public render() \n//   {\n//     return (\n//         <Editor editorState={this.editorState} onChange={this.onChange} />\n//     );\n//   }\n// }\n\nexport default App;\n\n\n/*\nBUGS\n-have to write in chonological order - can't jump around with names, since they only add to end\n-need to have a story for name picker cancel\n-case sensitive (name popup only when name is capitalized) - or maybe only for particular names that are also common words (will)\n\n\nFEATURES\n-\n*/\n"]},"metadata":{},"sourceType":"module"}