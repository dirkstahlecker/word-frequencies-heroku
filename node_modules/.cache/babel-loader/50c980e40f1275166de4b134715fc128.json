{"ast":null,"code":"var array = require('postgres-array');\n\nvar arrayParser = require('./arrayParser');\n\nvar parseDate = require('postgres-date');\n\nvar parseInterval = require('postgres-interval');\n\nvar parseByteA = require('postgres-bytea');\n\nfunction allowNull(fn) {\n  return function nullAllowed(value) {\n    if (value === null) return value;\n    return fn(value);\n  };\n}\n\nfunction parseBool(value) {\n  if (value === null) return value;\n  return value === 'TRUE' || value === 't' || value === 'true' || value === 'y' || value === 'yes' || value === 'on' || value === '1';\n}\n\nfunction parseBoolArray(value) {\n  if (!value) return null;\n  return array.parse(value, parseBool);\n}\n\nfunction parseBaseTenInt(string) {\n  return parseInt(string, 10);\n}\n\nfunction parseIntegerArray(value) {\n  if (!value) return null;\n  return array.parse(value, allowNull(parseBaseTenInt));\n}\n\nfunction parseBigIntegerArray(value) {\n  if (!value) return null;\n  return array.parse(value, allowNull(function (entry) {\n    return parseBigInteger(entry).trim();\n  }));\n}\n\nvar parsePointArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  var p = arrayParser.create(value, function (entry) {\n    if (entry !== null) {\n      entry = parsePoint(entry);\n    }\n\n    return entry;\n  });\n  return p.parse();\n};\n\nvar parseFloatArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  var p = arrayParser.create(value, function (entry) {\n    if (entry !== null) {\n      entry = parseFloat(entry);\n    }\n\n    return entry;\n  });\n  return p.parse();\n};\n\nvar parseStringArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  var p = arrayParser.create(value);\n  return p.parse();\n};\n\nvar parseDateArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  var p = arrayParser.create(value, function (entry) {\n    if (entry !== null) {\n      entry = parseDate(entry);\n    }\n\n    return entry;\n  });\n  return p.parse();\n};\n\nvar parseIntervalArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  var p = arrayParser.create(value, function (entry) {\n    if (entry !== null) {\n      entry = parseInterval(entry);\n    }\n\n    return entry;\n  });\n  return p.parse();\n};\n\nvar parseByteAArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  return array.parse(value, allowNull(parseByteA));\n};\n\nvar parseInteger = function (value) {\n  return parseInt(value, 10);\n};\n\nvar parseBigInteger = function (value) {\n  var valStr = String(value);\n\n  if (/^\\d+$/.test(valStr)) {\n    return valStr;\n  }\n\n  return value;\n};\n\nvar parseJsonArray = function (value) {\n  if (!value) {\n    return null;\n  }\n\n  return array.parse(value, allowNull(JSON.parse));\n};\n\nvar parsePoint = function (value) {\n  if (value[0] !== '(') {\n    return null;\n  }\n\n  value = value.substring(1, value.length - 1).split(',');\n  return {\n    x: parseFloat(value[0]),\n    y: parseFloat(value[1])\n  };\n};\n\nvar parseCircle = function (value) {\n  if (value[0] !== '<' && value[1] !== '(') {\n    return null;\n  }\n\n  var point = '(';\n  var radius = '';\n  var pointParsed = false;\n\n  for (var i = 2; i < value.length - 1; i++) {\n    if (!pointParsed) {\n      point += value[i];\n    }\n\n    if (value[i] === ')') {\n      pointParsed = true;\n      continue;\n    } else if (!pointParsed) {\n      continue;\n    }\n\n    if (value[i] === ',') {\n      continue;\n    }\n\n    radius += value[i];\n  }\n\n  var result = parsePoint(point);\n  result.radius = parseFloat(radius);\n  return result;\n};\n\nvar init = function (register) {\n  register(20, parseBigInteger); // int8\n\n  register(21, parseInteger); // int2\n\n  register(23, parseInteger); // int4\n\n  register(26, parseInteger); // oid\n\n  register(700, parseFloat); // float4/real\n\n  register(701, parseFloat); // float8/double\n\n  register(16, parseBool);\n  register(1082, parseDate); // date\n\n  register(1114, parseDate); // timestamp without timezone\n\n  register(1184, parseDate); // timestamp\n\n  register(600, parsePoint); // point\n\n  register(651, parseStringArray); // cidr[]\n\n  register(718, parseCircle); // circle\n\n  register(1000, parseBoolArray);\n  register(1001, parseByteAArray);\n  register(1005, parseIntegerArray); // _int2\n\n  register(1007, parseIntegerArray); // _int4\n\n  register(1028, parseIntegerArray); // oid[]\n\n  register(1016, parseBigIntegerArray); // _int8\n\n  register(1017, parsePointArray); // point[]\n\n  register(1021, parseFloatArray); // _float4\n\n  register(1022, parseFloatArray); // _float8\n\n  register(1231, parseFloatArray); // _numeric\n\n  register(1014, parseStringArray); //char\n\n  register(1015, parseStringArray); //varchar\n\n  register(1008, parseStringArray);\n  register(1009, parseStringArray);\n  register(1040, parseStringArray); // macaddr[]\n\n  register(1041, parseStringArray); // inet[]\n\n  register(1115, parseDateArray); // timestamp without time zone[]\n\n  register(1182, parseDateArray); // _date\n\n  register(1185, parseDateArray); // timestamp with time zone[]\n\n  register(1186, parseInterval);\n  register(1187, parseIntervalArray);\n  register(17, parseByteA);\n  register(114, JSON.parse.bind(JSON)); // json\n\n  register(3802, JSON.parse.bind(JSON)); // jsonb\n\n  register(199, parseJsonArray); // json[]\n\n  register(3807, parseJsonArray); // jsonb[]\n\n  register(3907, parseStringArray); // numrange[]\n\n  register(2951, parseStringArray); // uuid[]\n\n  register(791, parseStringArray); // money[]\n\n  register(1183, parseStringArray); // time[]\n\n  register(1270, parseStringArray); // timetz[]\n};\n\nmodule.exports = {\n  init: init\n};","map":{"version":3,"sources":["/Users/dirkstahlecker/programming/word-frequencies-heroku/node_modules/pg-types/lib/textParsers.js"],"names":["array","require","arrayParser","parseDate","parseInterval","parseByteA","allowNull","fn","nullAllowed","value","parseBool","parseBoolArray","parse","parseBaseTenInt","string","parseInt","parseIntegerArray","parseBigIntegerArray","entry","parseBigInteger","trim","parsePointArray","p","create","parsePoint","parseFloatArray","parseFloat","parseStringArray","parseDateArray","parseIntervalArray","parseByteAArray","parseInteger","valStr","String","test","parseJsonArray","JSON","substring","length","split","x","y","parseCircle","point","radius","pointParsed","i","result","init","register","bind","module","exports"],"mappings":"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","sourcesContent":["var array = require('postgres-array')\nvar arrayParser = require('./arrayParser');\nvar parseDate = require('postgres-date');\nvar parseInterval = require('postgres-interval');\nvar parseByteA = require('postgres-bytea');\n\nfunction allowNull (fn) {\n  return function nullAllowed (value) {\n    if (value === null) return value\n    return fn(value)\n  }\n}\n\nfunction parseBool (value) {\n  if (value === null) return value\n  return value === 'TRUE' ||\n    value === 't' ||\n    value === 'true' ||\n    value === 'y' ||\n    value === 'yes' ||\n    value === 'on' ||\n    value === '1';\n}\n\nfunction parseBoolArray (value) {\n  if (!value) return null\n  return array.parse(value, parseBool)\n}\n\nfunction parseBaseTenInt (string) {\n  return parseInt(string, 10)\n}\n\nfunction parseIntegerArray (value) {\n  if (!value) return null\n  return array.parse(value, allowNull(parseBaseTenInt))\n}\n\nfunction parseBigIntegerArray (value) {\n  if (!value) return null\n  return array.parse(value, allowNull(function (entry) {\n    return parseBigInteger(entry).trim()\n  }))\n}\n\nvar parsePointArray = function(value) {\n  if(!value) { return null; }\n  var p = arrayParser.create(value, function(entry) {\n    if(entry !== null) {\n      entry = parsePoint(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseFloatArray = function(value) {\n  if(!value) { return null; }\n  var p = arrayParser.create(value, function(entry) {\n    if(entry !== null) {\n      entry = parseFloat(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseStringArray = function(value) {\n  if(!value) { return null; }\n\n  var p = arrayParser.create(value);\n  return p.parse();\n};\n\nvar parseDateArray = function(value) {\n  if (!value) { return null; }\n\n  var p = arrayParser.create(value, function(entry) {\n    if (entry !== null) {\n      entry = parseDate(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseIntervalArray = function(value) {\n  if (!value) { return null; }\n\n  var p = arrayParser.create(value, function(entry) {\n    if (entry !== null) {\n      entry = parseInterval(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseByteAArray = function(value) {\n  if (!value) { return null; }\n\n  return array.parse(value, allowNull(parseByteA));\n};\n\nvar parseInteger = function(value) {\n  return parseInt(value, 10);\n};\n\nvar parseBigInteger = function(value) {\n  var valStr = String(value);\n  if (/^\\d+$/.test(valStr)) { return valStr; }\n  return value;\n};\n\nvar parseJsonArray = function(value) {\n  if (!value) { return null; }\n\n  return array.parse(value, allowNull(JSON.parse));\n};\n\nvar parsePoint = function(value) {\n  if (value[0] !== '(') { return null; }\n\n  value = value.substring( 1, value.length - 1 ).split(',');\n\n  return {\n    x: parseFloat(value[0])\n  , y: parseFloat(value[1])\n  };\n};\n\nvar parseCircle = function(value) {\n  if (value[0] !== '<' && value[1] !== '(') { return null; }\n\n  var point = '(';\n  var radius = '';\n  var pointParsed = false;\n  for (var i = 2; i < value.length - 1; i++){\n    if (!pointParsed) {\n      point += value[i];\n    }\n\n    if (value[i] === ')') {\n      pointParsed = true;\n      continue;\n    } else if (!pointParsed) {\n      continue;\n    }\n\n    if (value[i] === ','){\n      continue;\n    }\n\n    radius += value[i];\n  }\n  var result = parsePoint(point);\n  result.radius = parseFloat(radius);\n\n  return result;\n};\n\nvar init = function(register) {\n  register(20, parseBigInteger); // int8\n  register(21, parseInteger); // int2\n  register(23, parseInteger); // int4\n  register(26, parseInteger); // oid\n  register(700, parseFloat); // float4/real\n  register(701, parseFloat); // float8/double\n  register(16, parseBool);\n  register(1082, parseDate); // date\n  register(1114, parseDate); // timestamp without timezone\n  register(1184, parseDate); // timestamp\n  register(600, parsePoint); // point\n  register(651, parseStringArray); // cidr[]\n  register(718, parseCircle); // circle\n  register(1000, parseBoolArray);\n  register(1001, parseByteAArray);\n  register(1005, parseIntegerArray); // _int2\n  register(1007, parseIntegerArray); // _int4\n  register(1028, parseIntegerArray); // oid[]\n  register(1016, parseBigIntegerArray); // _int8\n  register(1017, parsePointArray); // point[]\n  register(1021, parseFloatArray); // _float4\n  register(1022, parseFloatArray); // _float8\n  register(1231, parseFloatArray); // _numeric\n  register(1014, parseStringArray); //char\n  register(1015, parseStringArray); //varchar\n  register(1008, parseStringArray);\n  register(1009, parseStringArray);\n  register(1040, parseStringArray); // macaddr[]\n  register(1041, parseStringArray); // inet[]\n  register(1115, parseDateArray); // timestamp without time zone[]\n  register(1182, parseDateArray); // _date\n  register(1185, parseDateArray); // timestamp with time zone[]\n  register(1186, parseInterval);\n  register(1187, parseIntervalArray);\n  register(17, parseByteA);\n  register(114, JSON.parse.bind(JSON)); // json\n  register(3802, JSON.parse.bind(JSON)); // jsonb\n  register(199, parseJsonArray); // json[]\n  register(3807, parseJsonArray); // jsonb[]\n  register(3907, parseStringArray); // numrange[]\n  register(2951, parseStringArray); // uuid[]\n  register(791, parseStringArray); // money[]\n  register(1183, parseStringArray); // time[]\n  register(1270, parseStringArray); // timetz[]\n};\n\nmodule.exports = {\n  init: init\n};\n"]},"metadata":{},"sourceType":"script"}